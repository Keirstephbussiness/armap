<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>AR Campus Demo - Joylens Store</title>

    <!-- A-Frame + AR.js -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <!-- Tailwind for UI -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      body { margin: 0; overflow: hidden; }
      #menu {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(255,255,255,0.9);
        border-radius: 10px;
        padding: 10px;
      }
      #infoCard {
        position: absolute;
        bottom: 10px;
        left: 10px;
        right: 10px;
        background: white;
        border-radius: 10px;
        padding: 15px;
        display: none;
        box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      }
    </style>
  </head>
  <body>
    
    <!-- Menu -->
    <div id="menu" class="shadow-lg">
      <h2 class="text-lg font-bold mb-2">AR Map Demo</h2>
      <button onclick="goToJoylens()" class="bg-blue-500 text-white px-3 py-1 rounded">Set Waypoint</button>
    </div>

    <!-- Info Card -->
    <div id="infoCard" class="shadow-lg">
      <h3 id="infoName" class="text-lg font-bold"></h3>
      <p id="infoDesc" class="text-sm mt-1"></p>
    </div>

    <!-- AR Scene -->
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; trackingMethod: best; debugUIEnabled: false;"
    >
      <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>

    <script>
      // Joylens Store coordinates
      const joylens = {
        name: "Joylens Store",
        lat: 14.370209559833405,
        lng: 120.92365054409018,
        desc: "A local convenience and optical store at your campus area."
      };

      // Add marker in AR
      const marker = document.createElement("a-entity");
      marker.setAttribute("gps-entity-place", `latitude: ${joylens.lat}; longitude: ${joylens.lng}`);
      marker.setAttribute("geometry", "primitive: box; height: 2; width: 2; depth: 2");
      marker.setAttribute("material", "color: red; opacity: 0.8");
      marker.addEventListener("click", () => showInfo(joylens));
      document.querySelector("a-scene").appendChild(marker);

      // Show info card
      function showInfo(building) {
        const card = document.getElementById("infoCard");
        document.getElementById("infoName").textContent = building.name;
        document.getElementById("infoDesc").textContent = building.desc;
        card.style.display = "block";
      }

      // Waypoint button (for now, just alert)
      function goToJoylens() {
        alert("Waypoint set to Joylens Store at coordinates: " + joylens.lat + ", " + joylens.lng);
      }
    </script>
  </body>
</html>
